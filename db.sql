-- --------------------------------------------------------
-- Хост: localhost
-- База данных: dostoprim_db
-- --------------------------------------------------------

-- 1. Удаление таблиц (для чистого старта)
DROP TABLE IF EXISTS `attractions`;
DROP TABLE IF EXISTS `users`;

-- 2. СТРУКТУРА: Создание таблицы `users` (ВКЛЮЧАЯ ROLE)
CREATE TABLE IF NOT EXISTS `users` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `username` VARCHAR(50) NOT NULL UNIQUE,
  `password` VARCHAR(255) NOT NULL, 
  `role` ENUM('user', 'admin') NOT NULL DEFAULT 'user', -- <-- НОВОЕ ПОЛЕ ROLE
  `email` VARCHAR(100) NOT NULL UNIQUE,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) 
ENGINE=InnoDB 
DEFAULT CHARSET=utf8mb4 
COLLATE=utf8mb4_unicode_ci;

-- 3. СТРУКТУРА: Создание таблицы `attractions`
CREATE TABLE IF NOT EXISTS `attractions` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `title` VARCHAR(255) NOT NULL,           
  `description` TEXT NOT NULL,             
  `city` VARCHAR(100) NOT NULL,            
  `image_url` VARCHAR(255) NULL,           
  `working_hours` VARCHAR(100) NULL,       
  `website` VARCHAR(255) NULL,             
  `short_description` VARCHAR(255) NULL    
) 
ENGINE=InnoDB 
DEFAULT CHARSET=utf8mb4 
COLLATE=utf8mb4_unicode_ci;

-- 4. ДАННЫЕ: Вставка тестовых пользователей
-- Тестовый АДМИН (testadmin) - Пароль: password123 (хеширован)
-- Обычный ПОЛЬЗОВАТЕЛЬ (testuser) - Пароль: user123 (хеширован)
INSERT INTO `users` (`username`, `password`, `email`, `role`) VALUES 
('testadmin', '$2y$10$tM9sE7E6uK4sR1eZ4G0Jm.nFzW1J0K2H4G9Vp6bJ3q5D8U4y5X4O2', 'admin@example.com', 'admin'),
('testuser', '$2y$10$7rT.eR9n4U0v8wL2zS6N2O0x5D9V3Q1Y8P7H6J5I4X3W2Z1A0B9C', 'user@example.com', 'user');

-- 5. ДАННЫЕ: Вставка всех 15 достопримечательностей
INSERT INTO `attractions` (`title`, `description`, `short_description`, `city`, `image_url`, `working_hours`, `website`) VALUES
('Афинский Акрополь', 'Древний крепостной холм в Афинах с комплексом исторических зданий, включая Парфенон. Символ классической Греции.', 'Крепостной холм с храмом Парфенон, символ классической Греции.', 'Афины', 'acropolis.jpg', '08:00 - 18:00', 'http://www.theacropolismuseum.gr'),
('Биг-Бен', 'Официально — Башня Елизаветы. Знаменитая часовая башня Вестминстерского дворца, одна из главных достопримечательностей Лондона.', 'Всемирно известная башня с часами, символ Лондона.', 'Лондон', 'big_ben.jpg', 'Круглосуточно', 'http://www.parliament.uk'),
('Бурдж-Халифа', 'Самый высокий небоскреб в мире, расположенный в Дубае, его высота составляет 828 метров. Предлагает смотровую площадку с панорамным видом.', 'Самый высокий небоскреб в мире (828 м).', 'Дубай', 'burj_khalifa.jpg', '10:00 - 23:00', 'http://www.burjkhalifa.ae'),
('Великая Китайская стена', 'Серия оборонительных сооружений, построенных для защиты северных границ Китая. Протянулась на тысячи километров.', 'Длиннейший в мире архитектурный памятник.', 'Пекин', 'great_wall.jpg', '07:30 - 17:30', 'http://www.chinahighlights.com'),
('Колизей', 'Один из крупнейших амфитеатров Древнего Рима, где проходили гладиаторские бои и публичные зрелища.', 'Крупнейший амфитеатр Древнего Рима.', 'Рим', 'colosseum.jpg', '08:30 - 19:00', 'http://www.colosseo.it'),
('Водопады Игуасу', 'Комплекс из 275 водопадов на границе Аргентины и Бразилии. Включен в список Всемирного наследия ЮНЕСКО.', 'Комплекс из 275 водопадов на границе Аргентины и Бразилии.', 'Фос-ду-Игуасу', 'iguazu.jpg', '09:00 - 17:00', 'http://www.iguazuargentina.com'),
('Карлов мост', 'Знаменитый исторический пешеходный мост через реку Влтаву в Праге. Соединяет Старый Город и Малую Страну, украшен скульптурами.', 'Исторический мост через реку Влтаву.', 'Прага', 'charles_bridge.jpg', 'Круглосуточно', NULL),
('Лувр', 'Музей искусства и археологии, расположенный в бывшем королевском дворце. Один из крупнейших и наиболее посещаемых музеев мира.', 'Один из крупнейших и наиболее посещаемых музеев мира.', 'Париж', 'louvre.jpg', '09:00 - 18:00', 'http://www.louvre.fr'),
('Мачу-Пикчу', 'Затерянный город инков, расположенный высоко в горах Перу. Построен как священный горный приют.', 'Затерянный город инков, расположенный высоко в горах.', 'Куско', 'machu_picchu.jpg', '06:00 - 17:30', 'http://www.machupicchu.gob.pe'),
('Московский Кремль', 'Исторический центр Москвы, крепость, где находится резиденция Президента России.', 'Крупнейшая действующая крепость в Европе.', 'Москва', 'kreml.jpg', '10:00 - 17:00', 'http://www.kreml.ru'),
('Мост Золотые Ворота', 'Подвесной мост через пролив Золотые Ворота. Самый узнаваемый символ Сан-Франциско.', 'Самый узнаваемый символ Сан-Франциско.', 'Сан-Франциско', 'golden_gate.jpg', 'Круглосуточно', 'http://www.goldengatebridge.org'),
('Петра', 'Древний город, высеченный прямо в скалах на территории современной Иордании. Известен своей архитектурой.', 'Древний город, высеченный прямо в скалах.', 'Вади-Муса', 'petra.jpg', '06:00 - 18:00', 'http://www.visitpetra.jo'),
('Пирамиды Гизы', 'Комплекс древних памятников, включающий три великие пирамиды. Одно из семи чудес света.', 'Комплекс древних памятников, одно из семи чудес света.', 'Гиза', 'pyramids.jpg', '08:00 - 17:00', NULL),
('Собор Святой Софии', 'Бывший православный собор, затем мечеть, затем музей, ныне снова мечеть. Образец византийского зодчества.', 'Образец византийского зодчества в Стамбуле.', 'Стамбул', 'hagia_sophia.jpg', '09:00 - 19:00', 'http://www.ayasofyamuzesi.gov.tr'),
('Статуя Свободы', 'Колоссальная скульптура, подаренная Франции народу США. Символ свободы и демократии.', 'Символ свободы и демократии в США.', 'Нью-Йорк', 'statue_of_liberty.jpg', '09:00 - 17:45', 'http://www.nps.gov/stli');